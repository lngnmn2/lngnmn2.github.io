<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Everything is so over (broken) | Notes from the digital underground by Lngnmn</title>
<meta name="keywords" content="Neovim">
<meta name="description" content="One of the major human psychological fallacy is to &ldquo;naturally&rdquo; assume that other people are more or less the same as you, just a bit mire weird. This is bullhit. Some of them are way off.
There is something callled a built-in (or native) package manager for  Neovim  in development. Have you ever tried it?
Notice that this is not just an editor, this is a whole &ldquo;ancient&rdquo; tradition (which goes all the way back to hardware terminals and math majors as a synonym for a programmer) with an associated culture, and even religious zealots, which insist on purity, minimalism and even avoidance of plugins (sort of veganism).">
<meta name="author" content="lngnmn2@yahoo.com">
<link rel="canonical" href="https://lngnmn2.github.io/articles/everything-is-so-broken/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a5781257de4197b8e3d54346acdf1dd55a9ba4cb91dcace192fc1baf228c08b5.css" integrity="sha256-pXgSV95Bl7jj1UNGrN8d1VqbpMuR3KzhkvwbryKMCLU=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://lngnmn2.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://lngnmn2.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://lngnmn2.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://lngnmn2.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://lngnmn2.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://lngnmn2.github.io/articles/everything-is-so-broken/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@300&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@300&display=swap" rel="stylesheet">
<style>
font-family: 'Noto Serif', serif;
font-family: 'Noto Sans', sans-serif;
font-family: 'Source Code Pro', monospace;
</style>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><meta property="og:url" content="https://lngnmn2.github.io/articles/everything-is-so-broken/">
  <meta property="og:site_name" content="Notes from the digital underground by Lngnmn">
  <meta property="og:title" content="Everything is so over (broken)">
  <meta property="og:description" content="One of the major human psychological fallacy is to “naturally” assume that other people are more or less the same as you, just a bit mire weird. This is bullhit. Some of them are way off.
There is something callled a built-in (or native) package manager for Neovim in development. Have you ever tried it?
Notice that this is not just an editor, this is a whole “ancient” tradition (which goes all the way back to hardware terminals and math majors as a synonym for a programmer) with an associated culture, and even religious zealots, which insist on purity, minimalism and even avoidance of plugins (sort of veganism).">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="articles">
    <meta property="article:published_time" content="2026-01-02T00:00:00+05:45">
    <meta property="article:modified_time" content="2026-01-02T14:26:18+05:45">
    <meta property="article:tag" content="Neovim">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Everything is so over (broken)">
<meta name="twitter:description" content="One of the major human psychological fallacy is to &ldquo;naturally&rdquo; assume that other people are more or less the same as you, just a bit mire weird. This is bullhit. Some of them are way off.
There is something callled a built-in (or native) package manager for  Neovim  in development. Have you ever tried it?
Notice that this is not just an editor, this is a whole &ldquo;ancient&rdquo; tradition (which goes all the way back to hardware terminals and math majors as a synonym for a programmer) with an associated culture, and even religious zealots, which insist on purity, minimalism and even avoidance of plugins (sort of veganism).">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Articles",
      "item": "https://lngnmn2.github.io/articles/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Everything is so over (broken)",
      "item": "https://lngnmn2.github.io/articles/everything-is-so-broken/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Everything is so over (broken)",
  "name": "Everything is so over (broken)",
  "description": "One of the major human psychological fallacy is to \u0026ldquo;naturally\u0026rdquo; assume that other people are more or less the same as you, just a bit mire weird. This is bullhit. Some of them are way off.\nThere is something callled a built-in (or native) package manager for Neovim in development. Have you ever tried it?\nNotice that this is not just an editor, this is a whole \u0026ldquo;ancient\u0026rdquo; tradition (which goes all the way back to hardware terminals and math majors as a synonym for a programmer) with an associated culture, and even religious zealots, which insist on purity, minimalism and even avoidance of plugins (sort of veganism).\n",
  "keywords": [
    "Neovim"
  ],
  "articleBody": "One of the major human psychological fallacy is to “naturally” assume that other people are more or less the same as you, just a bit mire weird. This is bullhit. Some of them are way off.\nThere is something callled a built-in (or native) package manager for Neovim in development. Have you ever tried it?\nNotice that this is not just an editor, this is a whole “ancient” tradition (which goes all the way back to hardware terminals and math majors as a synonym for a programmer) with an associated culture, and even religious zealots, which insist on purity, minimalism and even avoidance of plugins (sort of veganism).\nSo, one naively assumes, that the people who actually write (contribute to) it are at least somehow competent, while, unfortunately, math illiterate. At least they should understand the basics of development process, common practices and most widely used tools.\nAnd, wallah, these people just gave us an interface to get (install) plugins from Github (or any other url) - with the url and version fields of a record.\nHave you ever seen how people are using git and github? There are, just as in a structured texts, different levels of “granularity” . Just like in the /mental model of a vi user, there are fine-grained motions between nearby characters (hjkl) and between larger blocks of text (sentences, paragraphs) and code (blocks, functions, etc) .\nThere is something similar with git (and Github). The “lowest level” – the most specific (less general) abstraction is a rev, while the most general (least specific) is just an url (of a repo) with whatever branch hapens to be on it. Yes, you do not assume anything about the branch at this level of abstraction.\nYes, there are the most commonly used abstractions –an url, a branch, a tag and a rev (there are some more). Yes, one could, in principle, obtain a rev for each of them (the topmost of a branch, or a particular rev for a tag), but this is NOT what most people want.\nOne should follow the particular process (or practices) that the owner of the repo actually does. An owner may decide to just use a distinct branch, or to tag releases, or something more convoluted. There is no common “best practice” for software versioning using git, leave alone among plugin developers.\nNow there is a [rhetoric] question – What the fucking kind of a “developer” you are if you cannot grasp just this much? Don’t you fucking see that at very least, at the level of a first-year college student, what you should have is (in pseudocode)\nUrl(string) | Branch(string) | Tag(string) | Rev(string) and, ideally, with distinct types of strings – “url”, “branch”, “tag” and “ref”, so one cannot be passed to the other.\nNow the “business logic”: what should happen when one says .update()? Well, if one specified and url one shall pull from whatever happens to be there. When one specified a branch, one presumably wants a pull from that very branch. If, however, one explicitly specified a tag or a rev, one have to stay on these, or, at least, being asked for update if there is a newer tag (but not a newer rev) in the repo.\nWhat you have instad? “version”, where I should specify some string.\nHave you noticed that you cannot install nvim-treesitter-textobjects plugin (the absolutely most importing one, if you understand vim, of course). The developer decided to use the main branch to the most recent changes, so it is compatible with the main branch of the nvim-treesitter itself. But you, fucking degenerates, are keeping installing the master and updating to the master branch, because you fucking assume that every repository name the branch “master” .\nOK, I am smarter than you – I have cloned the right branch by hand and then I ran the\n:lua vim.pack.update() just as the documentation says…. and a whole clusterfuck of cosmic stupidity suddenly emerged.\n## nvim-treesitter-textobjects Path: home/lngnmn2.local/share/nvim/site/pack/core/opt/nvim-treesitter-textobjects Source: https://github.com/nvim-treesitter/nvim-treesitter-textobjects Revision before: ecd03f5811eb5c66d2fa420b79121b866feecd82 Revision after: 5ca4aaa6efdcc59be46b95a3e876300cfead05ef (master)\nPending updates: \u003c ecd03f5 │ fix: range contains(), is_in_range() to use nvim equivalents (#845) (grafted) \u003e 5ca4aaa │ docs: master is frozen …\nFirst of all, it still insist on (master), because the revision it tracks in the nvim-pack-lock.json file belongs to that branch, because it always installs the master branch first, even if I specify vesion='main' (according to the documentation).\nBut this is only a small, common stupidity. The cosmic one is in using async (and cooperative multitasking – Lua’s green threads) with calling git as external processes.\nAsync (surprise!) implies non-determinism and thus an unordered, non-sequential events, which means all your naive assumptions are off.\nHave you ever though about what could happen to a git “command”? It is not just “network unreachable”, it can be “timed out”, because curl is so fucking smart, it could be a “connection reset by peer”, “http2 framing error” and whatever the fuck out. The most important part, each individual “async task” could fail with a very high probability, and you will end up in a randomly inconsistent state.\nBut this shit seems to just join them all together and fail as a whole when a single one fails, in a fucking async scenario!\nIf this is what kind of people wrote modern Neovim I do not want to have anything with it in principle.\nI’ve spend days trying to figure out how to do shit just right (and end up doing very little, of course) and other people just cowboy-code (or a cavalier) and ship such a fucking abomination.\nI never suspected that everything is so fucking broken in the open source world until then (compared to the golden age of the 80s and 90s, when people tend to understand [first] what they are doing).\n",
  "wordCount" : "968",
  "inLanguage": "en",
  "datePublished": "2026-01-02T00:00:00+05:45",
  "dateModified": "2026-01-02T14:26:18+05:45",
  "author":[{
    "@type": "Person",
    "name": "lngnmn2@yahoo.com"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://lngnmn2.github.io/articles/everything-is-so-broken/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Notes from the digital underground by Lngnmn",
    "logo": {
      "@type": "ImageObject",
      "url": "https://lngnmn2.github.io/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://lngnmn2.github.io/" accesskey="h" title="Notes from the digital underground by Lngnmn (Alt + H)">Notes from the digital underground by Lngnmn</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://lngnmn2.github.io/about/" title="About me.">
                    <span>About me.</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Everything is so over (broken)
    </h1>
    <div class="post-meta"><span title='2026-01-02 00:00:00 +0545 +0545'>January 2, 2026</span>&nbsp;·&nbsp;<span>lngnmn2@yahoo.com</span>

</div>
  </header> 
  <div class="post-content"><p>One of the major human psychological fallacy is to &ldquo;naturally&rdquo; assume that other people are more or less the same as you, just a bit mire weird. This is bullhit. Some of them are way off.</p>
<p>There is something callled a built-in (or native) package manager for  <code>Neovim</code>  in development. Have you ever tried it?</p>
<p>Notice that this is not just an editor, this is a whole &ldquo;ancient&rdquo; tradition (which goes all the way back to hardware terminals and math majors as a synonym for a programmer) with an associated culture, and even religious zealots, which insist on purity, minimalism and even avoidance of plugins (sort of veganism).</p>
<p>So, one naively assumes, that the people who actually write (contribute to) it are at least  somehow competent, while, unfortunately, math illiterate. At least they should understand the basics of development process, common practices and most widely used tools.</p>
<p>And, wallah, these people just gave us an interface to get (install) plugins from Github (or any other url)  - with the <code>url</code> and  <code>version</code> fields of a record.</p>
<p>Have you ever seen how people are using git and github? There are, just as in a structured texts, different levels of &ldquo;granularity&rdquo; . Just like in the /mental model of a vi user, there are fine-grained motions between nearby characters (<code>hjkl</code>)  and between larger blocks of text (sentences, paragraphs) and code (blocks, functions, etc) .</p>
<p>There is something similar with git (and Github). The &ldquo;lowest level&rdquo; &ndash; the most specific (less general) abstraction is a <code>rev</code>, while the most general (least specific) is just an <code>url</code> (of a repo) <em>with whatever branch hapens to be on it</em>. Yes, you do not assume anything about the  <code>branch</code> at this level of abstraction.</p>
<p>Yes, there are the most commonly used abstractions &ndash;an  <code>url</code>, a  <code>branch</code>, a <code>tag</code>  and a <code>rev</code> (there are some more). Yes, one could, in principle, obtain a <code>rev</code> for each of them (the topmost of a branch, or a particular rev for a tag), but this is <strong>NOT</strong> what most people want.</p>
<p>One should <em>follow</em> the particular process (or practices) that the owner of the repo actually does. An owner may decide to just use a distinct branch, or to tag releases, or something more convoluted. There is no common &ldquo;best practice&rdquo;  for software versioning using <code>git</code>, leave alone among plugin developers.</p>
<p>Now there is a [rhetoric] question &ndash; What the fucking kind of a &ldquo;developer&rdquo;  you are if you cannot grasp just this much? Don&rsquo;t you fucking see that <em>at very least</em>, at the level of a first-year college student, what you should have is (in pseudocode)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fsharp" data-lang="fsharp"><span style="display:flex;"><span>Url<span style="color:#f92672">(</span><span style="color:#66d9ef">string</span><span style="color:#f92672">)</span> <span style="color:#f92672">|</span> Branch<span style="color:#f92672">(</span><span style="color:#66d9ef">string</span><span style="color:#f92672">)</span> <span style="color:#f92672">|</span> Tag<span style="color:#f92672">(</span><span style="color:#66d9ef">string</span><span style="color:#f92672">)</span> <span style="color:#f92672">|</span> Rev<span style="color:#f92672">(</span><span style="color:#66d9ef">string</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><p>and, ideally, with distinct types of strings &ndash; &ldquo;url&rdquo;, &ldquo;branch&rdquo;, &ldquo;tag&rdquo; and &ldquo;ref&rdquo;, so one <em>cannot be passed</em> to the other.</p>
<p>Now the &ldquo;business logic&rdquo;: what should happen when one says <code>.update()</code>? Well, if one specified and <code>url</code> one shall <em>pull from whatever happens to be there</em>. When one specified a <code>branch</code>, one presumably wants a pull from <em>that very branch</em>. If, however, one explicitly specified  a <code>tag</code> or a <code>rev</code>, one have to <em>stay on these</em>, or, at least, being asked for update if there is a <em>newer tag</em> (but not a <em>newer rev</em>) in the repo.</p>
<p>What you have instad? &ldquo;version&rdquo;, where I should specify some string.</p>
<p>Have you noticed that you cannot install <code>nvim-treesitter-textobjects</code> plugin (the absolutely most importing one, if you understand <code>vim</code>, of course). The developer decided to use the <code>main</code> branch to the most recent changes, so it is compatible with the <code>main</code> branch of the <code>nvim-treesitter</code> itself. But you, fucking degenerates, are keeping installing the  <code>master</code> and updating to the <code>master</code> branch, because you fucking assume that every repository name the branch &ldquo;master&rdquo; .</p>
<p>OK, I am smarter than you &ndash; I have cloned the right branch by hand and then I ran the</p>
<pre tabindex="0"><code class="language-vimdoc" data-lang="vimdoc">:lua vim.pack.update()
</code></pre><p>just as the documentation says&hellip;. and a whole clusterfuck of cosmic stupidity suddenly emerged.</p>
<blockquote>
<p>## nvim-treesitter-textobjects
Path:            <em>home/lngnmn2</em>.local/share/nvim/site/pack/core/opt/nvim-treesitter-textobjects
Source:          <a href="https://github.com/nvim-treesitter/nvim-treesitter-textobjects">https://github.com/nvim-treesitter/nvim-treesitter-textobjects</a>
Revision before: ecd03f5811eb5c66d2fa420b79121b866feecd82
Revision after:  5ca4aaa6efdcc59be46b95a3e876300cfead05ef (master)</p>
<p>Pending updates:
&lt; ecd03f5 │ fix: range contains(), is_in_range() to use nvim equivalents (#845) (grafted)
&gt; 5ca4aaa │ docs: master is frozen
&hellip;</p></blockquote>
<p>First  of all, it still insist on <code>(master)</code>, because the <em>revision</em> it tracks in the <code>nvim-pack-lock.json</code> file <em>belongs to that branch</em>, because it always installs the master branch <em>first</em>, even if I specify <code>vesion='main'</code> (according to the documentation).</p>
<p>But this is only a small, common stupidity. The cosmic one is in using <code>async</code> (and cooperative multitasking &ndash; Lua&rsquo;s green threads) with calling <code>git</code> as external processes.</p>
<p>Async (surprise!) implies <em>non-determinism</em> and thus an <em>unordered</em>, non-sequential events, which means all your naive assumptions are off.</p>
<p>Have you ever though about what could happen to a <code>git</code> &ldquo;command&rdquo;? It is not just &ldquo;network unreachable&rdquo;, it can be &ldquo;timed out&rdquo;, because <code>curl</code> is so fucking smart,  it could be a  &ldquo;connection reset by peer&rdquo;, &ldquo;http2 framing error&rdquo; and whatever the fuck out. The most important part, each individual &ldquo;async task&rdquo; could fail with a very high probability, and you will end up in <em>a randomly inconsistent state</em>.</p>
<p>But this shit seems to just <code>join</code> them all together and <em>fail as a whole when a single one fails</em>, in a fucking async scenario!</p>
<p>If this is what kind of people wrote modern Neovim I do not want to have anything with it in principle.</p>
<p>I&rsquo;ve spend days trying to figure out how to do shit <em>just right</em> (and end up doing very little, of course) and other people just cowboy-code (or a cavalier) and ship such a fucking abomination.</p>
<p>I never suspected that everything is so fucking broken in the open source world until then (compared to the golden age of the 80s and 90s, when people tend to <em>understand</em> [first] what they are doing).</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://lngnmn2.github.io/tags/neovim/">Neovim</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="https://lngnmn2.github.io/">Notes from the digital underground by Lngnmn</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
